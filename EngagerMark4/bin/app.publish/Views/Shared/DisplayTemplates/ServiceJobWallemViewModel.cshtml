@model EngagerMark4.ApplicationCore.SOP.ViewModels.ServiceJobWallemViewModel
@using EngagerMark4.Common.Configs;

@{
    int count = 0;
    int times = 0;
}

<html>
<head>
    <meta charset="utf-8" />
    <title>Service Job</title>
    <style>
        .invoice-box {
            max-width: 690px;
            margin: auto;
            border: none;
            box-shadow: 0 0 10px rgba(0, 0, 0, .15);
            font-size: 12px;
        }
    </style>
</head>

<body style="font-size:12px;font-family:Calibri;">
    <div class="invoice-box">
        <div style="margin-left:5px; text-align:center">
            @*<img src="@Url.Action("Inchcape.jpg", "Images\\Company", null, Request.Url.Scheme)" style="width:200px;" />*@
            <img src="@Url.Action("DownloadByReferenceIdAndType", "FileUpload", new { referenceId = Model.LetterheadId, entityType = EntityConfig.EntityType.Letterhead }, Request.Url.Scheme)" style="width:690px;" />
        </div>
        <table style="font-size:14px;margin-top:20px;">
            <tr>
                <td style="width:40px;text-align:left"></td>
                <td style="width:90px;text-align:left"></td>
                <td style="width:80px;text-align:left"></td>
                <td style="width:150px;text-align:left"></td>
                <td style="width:150px;text-align:left"></td>
                <td style="width:100px;text-align:left"></td>
                <td style="width:230px;text-align:left"></td>
            </tr>
            <tr style="height:20px;padding-top:20px;">
                <td colspan="7" style="text-align:center;">
                    <h3>CREW TRANSPORT</h3>
                </td>
            </tr>
            <tr style="height:30px;padding-top:20px;">
                <td>Date</td>
                <td colspan="2" style="text-align:left;">
                    <div style="border-bottom:1px solid;height:12px;padding-top:0px;padding-bottom:3px;font-size:13px;">
                        : @Model.WorkOrder.PickUpDateOnlyStr
                    </div>
                </td>
                <td colspan="2"></td>
                <td>
                    PO Number
                </td>
                <td>
                    <div style="border-bottom:1px solid;height:12px;padding-top:0px;padding-bottom:3px;font-size:13px;">:</div>
                </td>
            </tr>
            <tr style="height:30px;padding-top:20px;">
                <td colspan="2">
                    Vessel Name
                </td>
                <td colspan="5">
                    <div style="border-bottom:1px solid;height:12px;padding-top:0px;padding-bottom:3px;font-size:13px;">
                        : @Model.WorkOrder.VesselName
                    </div>
                </td>
            </tr>
            <tr style="height:30px;padding-top:20px;">
                <td colspan="2">
                    Location From
                </td>
                <td colspan="2">
                    <div style="border-bottom:1px solid;height:12px;padding-top:0px;padding-bottom:3px;font-size:13px;">
                        : @Model.WorkOrder.PickUpPoint
                    </div>
                </td>
                <td></td>
                <td>
                    To
                </td>
                <td>
                    <div style="border-bottom:1px solid;height:12px;padding-top:0px;padding-bottom:3px;font-size:13px;">
                        : @Model.WorkOrder.DropPoint
                    </div>
                </td>
            </tr>
            <tr style="height:30px;padding-top:20px;">
                <td colspan="2">
                    Time From
                </td>
                <td colspan="2">
                    <div style="border-bottom:1px solid;height:12px;padding-top:0px;padding-bottom:3px;font-size:13px;">
                        : @Model.StartDateTimeStr Hrs
                    </div>
                </td>
                <td></td>
                <td>
                    Pax
                </td>
                <td>
                    <div style="border-bottom:1px solid;height:12px;padding-top:0px;padding-bottom:3px;font-size:13px;">
                        : @Model.WorkOrder.GetNoOfPax(Model.VehicleId == null ? 0 : Model.VehicleId.Value)
                    </div>
                </td>
            </tr>
            <tr style="height:30px;padding-top:20px;">
                <td colspan="2">
                    Flight Details
                </td>
                <td colspan="5">
                    <div style="border-bottom:1px solid;height:12px;padding-top:0px;padding-bottom:3px;font-size:13px;">
                        : @Model.WorkOrder.GetFlightNo()
                    </div>
                </td>
            </tr>
            <tr style="height:30px;padding-top:20px;">
                <td colspan="2">
                    Remarks
                </td>
                <td colspan="5">
                    <div style="border-bottom:1px solid;height:12px;padding-top:0px;padding-bottom:3px;font-size:13px;">
                        :
                        @if (!String.IsNullOrEmpty(Model.WorkOrder.GetAdditionalStop()))
                        {
                            <label> Stops : @Model.WorkOrder.GetAdditionalStop()</label>
                        }

                        @Model.WorkOrder.AdminRemarkInVoucher
                    </div>
                </td>
            </tr>
            <tr style="height:20px;padding-top:20px;">
                <td colspan="7"></td>
            </tr>
            <tr style="padding-top:50px;">
                <td colspan="7">
                    <table style="font-size:12px;border-collapse:collapse;">
                        <thead>
                            <tr style="border-bottom:1px solid black;border-top:1px solid black;height:25px;">
                                <td style="text-align:center;width:40px;border-right:1px solid black;border-left:1px solid black;">S/No</td>
                                <td style="text-align:center;width:200px;border-right:1px solid black;border-left:1px solid black;">Position</td>
                                <td style="text-align:center;width:300px;border-right:1px solid black;border-left:1px solid black;">Passenger Name</td>
                                <td style="text-align:center;width:300px;border-right:1px solid black;border-left:1px solid black;">Signature</td>
                            </tr>
                        </thead>
                        <tbody>
                            @{
                                var passengerList = Model.GetPassengers(Model.VehicleId, Model.ServiceJobId);

                                if (!passengerList.Any())
                                {
                                    passengerList = Model.GetPassengers(Model.VehicleId);
                                }

                            }

                            @foreach (var passenger in passengerList)
                            {
                                count++;
                                <tr style="height:25px;">
                                    <td style="border-right:1px solid black;text-align:center;border-left:1px solid black;border-bottom:1px solid black;">
                                        @count
                                    </td>
                                    <td style="border-right:1px solid black;text-align:left;border-left:1px solid black;border-bottom:1px solid black;padding-left:4px;">
                                        @passenger.Rank
                                    </td>
                                    <td style="border-right:1px solid black;text-align:left;border-left:1px solid black;border-bottom:1px solid black;padding-left:4px;">
                                        @passenger.Name
                                    </td>
                                    <td style="border-right:1px solid black;text-align:left;border-left:1px solid black;border-bottom:1px solid black;padding-left:4px;text-align:center;">
                                        @if (Model.SignatureId == 0)
                                        {
                                            <img src="@Url.Action("DownloadByReferenceIdAndType", "FileUpload", new { referenceId= passenger.Id, entityType = EntityConfig.EntityType.ServiceJobSignature}, Request.Url.Scheme)" style="height:70px;width:150px;vertical-align:central;" />
                                        }
                                        else
                                        {
                                            <img src="@Url.Action("Download", "FileUpload", new { id = Model.SignatureId }, Request.Url.Scheme)" style="height:70px;width:150px;vertical-align:central;" />
                                        }
                                    </td>
                                </tr>
                            }

                            @{
                                times = 9 - count;
                            }

                            @for (int i = 0; i < times; i++)
                            {
                                count = count + 1;
                                <tr style="height:25px;font-size:12px;">
                                    <td style="border-right:1px solid black;text-align:center;border-left:1px solid black;border-bottom:1px solid black;">

                                        @count
                                    </td>
                                    <td style="border-right:1px solid black;text-align:left;border-left:1px solid black;border-bottom:1px solid black;padding-left:4px;"></td>
                                    <td style="border-right:1px solid black;text-align:left;border-left:1px solid black;border-bottom:1px solid black;padding-left:4px;"></td>
                                    <td style="border-right:1px solid black;text-align:left;border-left:1px solid black;border-bottom:1px solid black;padding-left:4px;"></td>
                                </tr>
                            }

                        </tbody>
                    </table>
                </td>
            </tr>
        </table>
        @*<div style="margin-left:5px;">
                    <img src="@Url.Action(Model.FooterLogo, "Images\\Company", null, Request.Url.Scheme)" style="width:690px;height:60px;" />            </div>
            </div>*@

    </div>
</body>
</html>

